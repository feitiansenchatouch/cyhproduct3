/*
 * File: app/controller/MainPanelControler.js
 *
 * This file was generated by Sencha Architect version 2.2.3.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.controller.MainPanelControler', {
    extend: 'Ext.app.Controller',
    alias: 'controller.mainPanelControler',

    config: {
        refs: {
            mainPanelDataView: '#mainPanelDataView',
            toZhuceButton:"#toZhuceButton",
            loginShouYe:"#loginShouYe",
            zhuCeShouYe:"#zhuCeShouYe",
            loginButton:"#loginButton",
           
        },
        
        control: {
            "mainPanelDataView": {
                itemsingletap: 'onmainPanelDataviewItemSingletap'
            },
            toZhuceButton:{
            	tap:"ontoZhuceButtonTap"
            },
            loginShouYe:{
            	tap:"onloginShouYeButtonTap"
            },
            zhuCeShouYe:{
            	tap:"onloginShouYeButtonTap"
            },
            loginButton:{
            	tap:"onloginButtonTap"
            },
            
        }
    },
    
    onmainPanelDataviewItemSingletap: function(dataview, index, target, record, e, eOpts) {
    	var name = record.get("name");
    	var carBasePanel = dataview.getParent().getParent();
        if(name=="carhome"){
            //back.push(['','',dataview.getParent().getId()]);
            var carBrandStore = Ext.getStore("CarBrands");
            if(!(carBrandStore.isLoaded())){
                carBrandStore.load();
            }
            carBasePanel.setActiveItem("#carHomeTabPanel");
            var carHomeTabPanel = carBasePanel.getActiveItem();
            Ext.get("chBack").hide();
            carHomeTabPanel.setActiveItem(0);
            carHomeTabPanel.getActiveItem().setActiveItem(0);
        }else if(name=="sc"){
        	//back.push(['','',dataview.getParent().getId()]);
        	var checkCars = Ext.getStore("checkCars");
        	if(!(checkCars.isLoaded())){
        		checkCars.load();
        	}
        	Ext.get("ccBack").hide();
        	carBasePanel.setActiveItem("#checkCarTabPanel");
            var checkCarTabPanel = carBasePanel.getActiveItem();
            checkCarTabPanel.setActiveItem(0);
            checkCarTabPanel.getActiveItem().setActiveItem(0);
        }else if(name=="qcbx"){
        	var insuranceComponysStore = Ext.getStore("insuranceComponys");
			if(!(insuranceComponysStore.isLoaded())){
				insuranceComponysStore.load();
			}
        	carBasePanel.setActiveItem("#insuranceHomeTabPanel");
        	var insuranceHomeTabPanel =  carBasePanel.getActiveItem();
        	insuranceHomeTabPanel.setActiveItem(0);
        	insuranceHomeTabPanel.getActiveItem().setActiveItem(0);
        	Ext.getCmp("ihBack").hide();
        }else if(name=="yjdh"){
        	carBasePanel.setActiveItem("#navigationTabPanel");
        	Ext.getCmp("nBack").hide();
        	var navigationTabPanel =  carBasePanel.getActiveItem();
        	navigationTabPanel.setActiveItem(0);
        	navigationTabPanel.getActiveItem().setActiveItem(0);
        }else if(name=="qtfw"){
        	Ext.getCmp("merchantBack").hide();
        	carBasePanel.setActiveItem("#merchantServicesTabPanel");
        	var store = Ext.getStore("mechantServiceMainPanelStore");
        	if(!(store.isLoaded())){
        		store.load();
        	}
        	merchantServicesTabPanel = carBasePanel.getActiveItem();
        	merchantServicesTabPanel.setActiveItem(0);
        	merchantServicesTabPanel.getActiveItem().setActiveItem(0);
        	merchantServicesTabPanel.getActiveItem().getActiveItem().setActiveItem(0);
        	merchantServicesTabPanel.getActiveItem().getActiveItem().getActiveItem().setActiveItem(0);
        }else{
        	Ext.getCmp("bbsBack123").hide();
        	Ext.getStore("bbsMainListStore").load();
        	carBasePanel.setActiveItem("#BBSTabPanel");
        	var BBSTabPanel = carBasePanel.getActiveItem(0);
        	BBSTabPanel.setActiveItem(0);
        	BBSTabPanel.getActiveItem().setActiveItem(0);
        	BBSTabPanel.getActiveItem().getActiveItem().setActiveItem(0);
        	BBSTabPanel.getActiveItem().getActiveItem().getActiveItem().setActiveItem(0);
        }
    },
    ontoZhuceButtonTap:function(button,e,eOpts){
    	Ext.getCmp("carBasePanel").setActiveItem("#zhucePanel");
    },
    onloginShouYeButtonTap:function(button,eOpts){
    	Ext.getCmp("carBasePanel").setActiveItem(0);
    },
    onloginButtonTap:function(button,e,eOpts){
    	login=true;
    	location.href = "tel:" + 037188888880;
    	var backValue = back.pop();
    	if(backValue.length==2){
    		var carbasePanel = Ext.getCmp("carBasePanel");
    		carbasePanel.setActiveItem("#"+backValue[0]);
    		carbasePanel.getActiveItem().setActiveItem("#"+backValue[1]);
    	}
    }
});